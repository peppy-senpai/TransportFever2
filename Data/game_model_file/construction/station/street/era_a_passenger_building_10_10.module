local vec3 = require "vec3"
local transf = require "transf"
local colliderutil = require "colliderutil"
local constructionutil = require "constructionutil"
local modulesutil = require "modulesutil"

local cargoCapacity = 0
local passengerCapacity = 20

--Begin Generated
local generatedData = {
	["era_a_passenger_building_10_10"] = {
		models = {
			["station/rail/asset/era_a_street_pillar.mdl"] = {
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -4.65350, -9.64726, 0.27530, 1.00000, },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -2.27350, -9.64726, 0.27530, 1.00000, },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00650, -9.64726, 0.27530, 1.00000, },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 2.28650, -9.64726, 0.27530, 1.00000, },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 4.65250, -9.64726, 0.27530, 1.00000, },
			},
			["station/road/streetstation/asset/bench_era_a_l_1.mdl"] = {
				{ -0.00000, 1.00000, 0.00000, 0.00000, -1.00000, -0.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 2.81500, -5.70591, 0.27000, 1.00000, },
				{ 0.00000, -1.00000, 0.00000, 0.00000, 1.00000, 0.00000, -0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -2.82500, -5.64000, 0.27000, 1.00000, },
			},
			["station/road/streetstation/asset/bench_era_a_r_1.mdl"] = {
				{ -0.00000, 1.00000, 0.00000, 0.00000, -1.00000, -0.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 2.81500, -5.70591, 0.27000, 1.00000, },
				{ 0.00000, -1.00000, 0.00000, 0.00000, 1.00000, 0.00000, -0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -2.82500, -5.64000, 0.27000, 1.00000, },
			},
			["station/road/streetstation/asset/bus_stop_sign_era_a_1.mdl"] = {
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -3.40000, -0.32000, 0.25500, 1.00000, },
			},
			["station/road/streetstation/asset/com_small_era_a_3.mdl"] = {
				{ -0.00000, 1.00000, 0.00000, 0.00000, -1.00000, -0.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -4.49000, -3.53000, 0.24000, 1.00000, },
			},
			["station/road/streetstation/asset/tickets_era_a_1.mdl"] = {
				{ -1.00000, 0.00000, -0.00000, 0.00000, -0.00000, -1.00000, 0.00000, 0.00000, -0.00000, 0.00000, 1.00000, 0.00000, -1.90000, -3.49000, 0.18000, 1.00000, },
			},
			["station/road/streetstation_sidebuilding_era_a_s1.mdl"] = {
				{ 1.00000, 0.00000, -0.00000, 0.00000, -0.00000, 1.00000, 0.00000, 0.00000, 0.00000, -0.00000, 1.00000, 0.00000, 0.00000, -5.00000, 0.00000, 1.00000, },
			},
			["street/street_asset_mix/trash_standing_a.mdl"] = {
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 4.14000, -9.08000, 0.25372, 1.00000, },
			},
			["street/street_light_eu_a.mdl"] = {
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -4.16000, -0.72000, 0.46000, 1.00000, },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 4.22000, -0.74000, 0.46000, 1.00000, },
			},
		},
	},
}
--End Generated

function data()

return { 
	cost = {
		price = 80000,
	},
	category = {
		categories = { "passenger", },
	},
	description = {
		name = _("Small passenger building"),
		description = _("Building for waiting passengers. Provides capacity for 20 passengers."),
		icon = "ui/construction/station/street/era_a_passenger_building_10_10.tga"
	}, 
	availability = {
		yearFrom = 0,
		yearTo = 1920
	},
	type = "street_terminal_entrance",
	order = {
		value = 10,
	},
	metadata = {
		cargo = true,
		building = true,
		moreCapacity = {
			cargo = cargoCapacity,
			passenger = passengerCapacity - 12
		}
	},
	
	updateFn = function(result, transform, tag, slotId, addModelFn, params)
		modulesutil.addPoolEdges(result, false, {
			{ 12, 0 }
		}, #result.models)

		constructionutil.addModelsAndGroups(params, generatedData["era_a_passenger_building_10_10"], result, tag, transform)
		
		local terrain_faces = {
			{
				type = "EQUAL",
				faces = { { { -5.5, 0, 0, 1 }, { -5.5, -10.5, 0, 1 }, { 5.5, -10.5, 0, 1 }, { 5.5, 0, 0, 1 } } }, 
				slopeLow = 0.3,
				slopeHigh = 0.6,
				optional = false,
			}
		}
		modulesutil.TransformAlignmentFaces(transform, terrain_faces)
		table.insert(result.terrainAlignmentLists, terrain_faces[1])
		
		table.insert(result.groundFaces, {  
			face = terrain_faces[1].faces[1],
			modes = {
				{
					type = "FILL",               
					key = "industry_floor_high_priority.gtex.lua"
				},
				{
					type = "STROKE",
					key = "pedestrian_connection_border.lua"
				},
			},
			loop = true, 
		})
 
		return result
    end	,
	getModelsFn = function()
		
		local result = {
			{ 
				id = "station/road/streetstation_sidebuilding_era_a_s1.mdl",
				transf = { 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000 },
			}
		}
		
		return result
	end	
}

end
